(this["webpackJsonpcallosum-webapp"]=this["webpackJsonpcallosum-webapp"]||[]).push([[0],{58:function(e,n,t){},86:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(43),o=t.n(c),s=(t(58),t(24)),i=t(53),u=t(25),l=t(16),f=t(15),d=t.n(f),m=t(21),p=t(44),b=t.n(p),h=t(52),j=new URLSearchParams(window.location.search),v="".concat(j.get("host")||"localhost",":").concat(j.get("port")||5e3),O=Object(h.a)(v);function g(e){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.emit("msg",n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=t(48),y=b.a.get("//".concat(v,"/static/features.csv")).then(function(){var e=Object(m.a)(d.a.mark((function e(n){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){Object(w.parse)(n.data,{dynamicTyping:!0,skipEmptyLines:!0,header:!0,complete:e,error:t})}));case 2:return t=e.sent,e.abrupt("return",t.data.filter((function(e){return"default"!==e.name})).map((function(e){return Object(s.a)({},e)})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e),[{id:0,name:"Test 123",song:"Test 123",artist:"Test Artist",danceability:0,energy:0,liveness:0,valence:0},{id:0,name:"Test 456",song:"Test 456",artist:"Another Artist",danceability:0,energy:0,liveness:0,valence:0}]}));function F(){return(F=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(m.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({type:"select",name:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C,S,M,T,N,L,A=t(17),E=a.a.createContext(null),P=t(29),J=t.n(P),B=t(3),I=A.a.div(C||(C=Object(l.a)(["\n    font-family: Lato, sans-serif;\n    font-weight: 400;\n    font-style: normal;\n    border-radius: 2px;\n    background: #FFF2;\n    cursor: pointer;\n    user-select: none;\n\n    &:hover {\n        background: #FFF5;\n    }\n\n    &:active {\n        color: #555;\n        background: #FFF;\n    }\n\n    &.selected {\n        color: #000;\n        background: #EEE;\n        cursor: default;\n    }\n"])));function z(e){var n=e.music,t=Object(r.useContext)(E),a=t.selected,c=t.setSelected,o=n.name===a;return Object(B.jsxs)(I,{className:J()("d-flex px-3 py-2 my-2 align-items-center",o&&"selected"),onClick:function(){c(n.name),function(e){return k.apply(this,arguments)}(n.name).catch((function(e){console.error(e)}))},children:[Object(B.jsx)("div",{className:"h4 mb-0 flex-grow-1",children:n.artist}),Object(B.jsx)("div",{className:"h6 mb-0 text-end text-muted",children:n.song})]})}function D(e){for(var n=e.length;0!==n;){var t=Math.floor(Math.random()*n);n--;var r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e}var R=Object(A.b)(S||(S=Object(l.a)(["\n    0% {\n        opacity: 0;\n    }\n"]))),U=Object(A.b)(M||(M=Object(l.a)(["\n    0% {\n        color: #FFF;\n        transform: scale(1);\n    }\n    10% {\n        transform: scale(.99);\n    }\n"]))),q=A.a.h1(T||(T=Object(l.a)(["\n    font-family: Futura, Jost, sans-serif;\n    color: #AAA;\n    text-align: center;\n    font-size: 15rem;\n    font-weight: 100;\n    text-transform: uppercase;\n    letter-spacing: 0;\n    user-select: none;\n    cursor: pointer;\n    animation: "," 1s forwards ease-out;\n\n    &.shuffle {\n        animation: "," 1s forwards ease-out;\n    }\n"])),R,U),G=A.a.div(N||(N=Object(l.a)(["\n    margin: auto;\n    max-width: 60rem;\n"]))),H=A.a.div(L||(L=Object(l.a)(["\n    max-height: 30rem;\n    overflow-y: auto;\n"])));function K(){var e=Object(r.useState)(""),n=Object(u.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)([]),o=Object(u.a)(c,2),l=o[0],f=o[1],d=Object(r.useState)(null),m=Object(u.a)(d,2),p=m[0],b=m[1],h=Object(r.useState)(0),j=Object(u.a)(h,2),v=j[0],O=j[1];Object(r.useEffect)((function(){(function(){return F.apply(this,arguments)})().then((function(e){return f(D(Object(i.a)(e)))})).catch((function(e){return console.error(e)}))}),[]);var g;return Object(B.jsx)(E.Provider,{value:{selected:p,setSelected:function(e){b(e),O(Math.random())}},children:Object(B.jsxs)("div",{className:"mx-2 mt-3 mt-md-4",children:[Object(B.jsx)(q,{className:J()("mb-3 text-center",v&&"shuffle"),onClick:function(e){return p&&v?function(){var e=l.find((function(e){return e.name===p}));e&&(O(null),a(""),f(l.map((function(n){return Object(s.a)(Object(s.a)({},n),{},{distance:Math.pow(e.danceability-n.danceability,2)+Math.pow(e.energy-n.energy,2)+Math.pow(e.liveness-n.liveness,2)+Math.pow(e.valence-n.valence,2)})})).sort((function(e,n){return e.distance-n.distance}))),g&&(g.scrollTop=0))}():(f(D(l)),O(Math.random()),void a(""))},children:"Callosum"},v),Object(B.jsxs)(G,{children:[Object(B.jsx)("div",{className:"py-2",children:Object(B.jsx)("input",{type:"text",className:"form-control form-control-lg rounded-0",placeholder:"search for music...",value:t,onFocus:function(e){return e.target.select()},onChange:function(e){return a(e.target.value)}})}),Object(B.jsx)(H,{ref:function(e){return g=e},className:"pe-2",children:l.filter((function(e){if(!t)return!0;var n=t.toLowerCase().trim();return[e.genre,e.artist,e.song].some((function(e){return String(null!==e&&void 0!==e?e:"").toLowerCase().includes(n)}))})).map((function(e){return Object(B.jsx)(z,{music:e},e.name)}))})]})]})})}var Q=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,87)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(K,{})}),document.getElementById("root")),Q()}},[[86,1,2]]]);
//# sourceMappingURL=main.5b7cd23d.chunk.js.map